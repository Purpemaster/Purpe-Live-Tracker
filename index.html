
    const debug = (msg) => {
      const box = document.getElementById("debug-box");
      const p = document.createElement("div");
      p.textContent = `[DEBUG] ${msg}`;
      box.appendChild(p);
      box.scrollTop = box.scrollHeight;
    };

    const donations = {
      SOL: 1383.12,
      PURPE: 2774.50,
      PYUSD: 0.00
    };

    const GOAL = 20000;

    function updateDisplay() {
      const total = donations.SOL + donations.PURPE + donations.PYUSD;
      const progress = Math.min((total / GOAL) * 100, 100).toFixed(2);

      document.getElementById("current-amount").textContent = `$${total.toFixed(2)}`;
      document.getElementById("goal-amount").textContent = `$${GOAL.toFixed(2)}`;
      document.getElementById("progress-fill").style.width = `${progress}%`;

      document.getElementById("breakdown").innerHTML = `
        SOL: $${donations.SOL.toFixed(2)}<br>
        PURPE: $${donations.PURPE.toFixed(2)}<br>
        PYUSD: $${donations.PYUSD.toFixed(2)}
      `;
    }

    updateDisplay();
  </script>

  <!-- PYUSD Fetch mit On-Screen-Debug -->
  <script>
    const SOLANA_WALLET = "9uo3TB4a8synap9VMNpby6nzmnMs9xJWmgo2YKJHZWVn";
    const PYUSD_MINT = "2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo";
    const HELIUS_API_KEY = "2e046356-0f0c-4880-93cc-6d5467e81c73";
    let lastPYUSDBalance = null;

    async function fetchSolanaPYUSDBalance() {
      const url = `https://api.helius.xyz/v0/addresses/${SOLANA_WALLET}/balances?api-key=${HELIUS_API_KEY}`;
      debug("API-Abfrage gestartetâ€¦");

      try {
        const res = await fetch(url);
        const data = await res.json();
        debug("Antwort erhalten.");
        const token = data.tokens.find(t => t.mint === PYUSD_MINT);

        if (token) {
          const rawAmount = token.amount;
          const decimals = token.decimals || 6;
          const balance = rawAmount / Math.pow(10, decimals);
          debug("PYUSD gefunden: " + balance.toFixed(2));

          if (lastPYUSDBalance !== null && balance > lastPYUSDBalance) {
            const diff = (balance - lastPYUSDBalance).toFixed(2);
            showToast(`+ $${diff} PYUSD received!`);
          }

          lastPYUSDBalance = balance;
          donations.PYUSD = balance;
          updateDisplay();
        } else {
          debug("PYUSD nicht gefunden!");
        }

      } catch (err) {
        debug("Fehler beim Abrufen: " + err.message);
      }
    }

    function showToast(message) {
      const toast = document.createElement("div");
      toast.textContent = message;
      toast.style.position = "fixed";
      toast.style.bottom = "130px";
      toast.style.right = "20px";
      toast.style.background = "rgba(0,0,0,0.85)";
      toast.style.color = "#fff";
      toast.style.padding = "10px 20px";
      toast.style.borderRadius = "8px";
      toast.style.fontFamily = "'Orbitron', sans-serif";
      toast.style.boxShadow = "0 0 15px purple";
      toast.style.zIndex = "9999";
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.style.transition = "opacity 1s ease";
        toast.style.opacity = 0;
        setTimeout(() => toast.remove(), 1000);
      }, 3000);
    }

    fetchSolanaPYUSDBalance();
    setInterval(fetchSolanaPYUSDBalance, 60000);
  </script>

</body>
</html>
